#include "neopixel_ifc.h"

#include <errno.h>
#include <string.h>

#define LOG_LEVEL 4
#include <zephyr/logging/log.h>
LOG_MODULE_REGISTER(main);

#include <zephyr/kernel.h>
#include <zephyr/drivers/led_strip.h>
#include <zephyr/device.h>
#include <zephyr/drivers/spi.h>
#include <zephyr/sys/util.h>

#define STRIP_NODE		DT_ALIAS(led_strip)
#define STRIP_NUM_PIXELS	DT_PROP(DT_ALIAS(led_strip), chain_length)

#define DELAY_TIME K_MSEC(10)
#define DELAY_TIME_LOGO K_MSEC(30)

#define RGB(_r, _g, _b) { .r = (_r), .g = (_g), .b = (_b) }

static const struct led_rgb colors[] = {
	RGB(0x0f, 0x00, 0x00), /* red */
	RGB(0x00, 0x0f, 0x00), /* green */
	RGB(0x00, 0x00, 0x0f), /* blue */
};

struct led_rgb pixels[STRIP_NUM_PIXELS];

static const struct device *const strip = DEVICE_DT_GET(STRIP_NODE);

#define COLUMNS 30
#define ROWS    10

// Basic alphabet
uint8_t letters[][6] = {
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, // SPACE
{ 0x7F, 0x88, 0x88, 0x88, 0x7F, 0x00}, // A
{ 0xFF, 0x91, 0x91, 0x91, 0x6E, 0x00}, // B
{ 0x7E, 0x81, 0x81, 0x81, 0x42, 0x00}, // C
{ 0xFF, 0x81, 0x81, 0x42, 0x3C, 0x00}, // D
{ 0xFF, 0x91, 0x91, 0x91, 0x81, 0x00}, // E
{ 0xFF, 0x90, 0x90, 0x90, 0x80, 0x00}, // F
{ 0x7E, 0x81, 0x89, 0x89, 0x4E, 0x00}, // G
{ 0xFF, 0x10, 0x10, 0x10, 0xFF, 0x00}, // H
{ 0x81, 0x81, 0xFF, 0x81, 0x81, 0x00}, // I
{ 0x06, 0x01, 0x01, 0x01, 0xFE, 0x00}, // J
{ 0xFF, 0x18, 0x24, 0x42, 0x81, 0x00}, // K
{ 0xFF, 0x01, 0x01, 0x01, 0x01, 0x00}, // L
{ 0xFF, 0x40, 0x30, 0x40, 0xFF, 0x00}, // M
{ 0xFF, 0x40, 0x30, 0x08, 0xFF, 0x00}, // N
{ 0x7E, 0x81, 0x81, 0x81, 0x7E, 0x00}, // O
{ 0xFF, 0x88, 0x88, 0x88, 0x70, 0x00}, // P
{ 0x7E, 0x81, 0x85, 0x82, 0x7D, 0x00}, // Q
{ 0xFF, 0x88, 0x8C, 0x8A, 0x71, 0x00}, // R
{ 0x61, 0x91, 0x91, 0x91, 0x8E, 0x00}, // S
{ 0x80, 0x80, 0xFF, 0x80, 0x80, 0x00}, // T
{ 0xFE, 0x01, 0x01, 0x01, 0xFE, 0x00}, // U
{ 0xF0, 0x0C, 0x03, 0x0C, 0xF0, 0x00}, // V
{ 0xFF, 0x02, 0x0C, 0x02, 0xFF, 0x00}, // W
{ 0xC3, 0x24, 0x18, 0x24, 0xC3, 0x00}, // X
{ 0xE0, 0x10, 0x0F, 0x10, 0xE0, 0x00}, // Y
{ 0x83, 0x85, 0x99, 0xA1, 0xC1, 0x00}, // Z
{ 0x06, 0x29, 0x29, 0x29, 0x1F, 0x00}, // a
{ 0xFF, 0x09, 0x11, 0x11, 0x0E, 0x00}, // b
{ 0x1E, 0x21, 0x21, 0x21, 0x12, 0x00}, // c
{ 0x0E, 0x11, 0x11, 0x09, 0xFF, 0x00}, // d
{ 0x0E, 0x15, 0x15, 0x15, 0x0C, 0x00}, // e
{ 0x08, 0x7F, 0x88, 0x80, 0x40, 0x00}, // f
{ 0x30, 0x49, 0x49, 0x49, 0x7E, 0x00}, // g
{ 0xFF, 0x08, 0x10, 0x10, 0x0F, 0x00}, // h
{ 0x00, 0x00, 0x5F, 0x00, 0x00, 0x00}, // i
{ 0x02, 0x01, 0x21, 0xBE, 0x00, 0x00}, // j
{ 0xFF, 0x04, 0x0A, 0x11, 0x00, 0x00}, // k
{ 0x00, 0x81, 0xFF, 0x01, 0x00, 0x00}, // l
{ 0x3F, 0x20, 0x18, 0x20, 0x1F, 0x00}, // m
{ 0x3F, 0x10, 0x20, 0x20, 0x1F, 0x00}, // n
{ 0x0E, 0x11, 0x11, 0x11, 0x0E, 0x00}, // o
{ 0x3F, 0x24, 0x24, 0x24, 0x18, 0x00}, // p
{ 0x10, 0x28, 0x28, 0x18, 0x3F, 0x00}, // q
{ 0x1F, 0x08, 0x10, 0x10, 0x08, 0x00}, // r
{ 0x09, 0x15, 0x15, 0x15, 0x02, 0x00}, // s
{ 0x20, 0xFE, 0x21, 0x01, 0x02, 0x00}, // t
{ 0x1E, 0x01, 0x01, 0x02, 0x1F, 0x00}, // u
{ 0x1C, 0x02, 0x01, 0x02, 0x1C, 0x00}, // v
{ 0x1E, 0x01, 0x0E, 0x01, 0x1E, 0x00}, // w
{ 0x11, 0x0A, 0x04, 0x0A, 0x11, 0x00}, // x
{ 0x00, 0x39, 0x05, 0x05, 0x3E, 0x00}, // y
{ 0x11, 0x13, 0x15, 0x19, 0x11, 0x00}, // z
{ 0x00, 0x41, 0xFF, 0x01, 0x00, 0x00}, // 1
{ 0x43, 0x85, 0x89, 0x91, 0x61, 0x00}, // 2
{ 0x42, 0x81, 0x91, 0x91, 0x6E, 0x00}, // 3
{ 0x18, 0x28, 0x48, 0xFF, 0x08, 0x00}, // 4
{ 0xF2, 0x91, 0x91, 0x91, 0x8E, 0x00}, // 5
{ 0x1E, 0x29, 0x49, 0x89, 0x86, 0x00}, // 6
{ 0x80, 0x8F, 0x90, 0xA0, 0xC0, 0x00}, // 7
{ 0x6E, 0x91, 0x91, 0x91, 0x6E, 0x00}, // 8
{ 0x70, 0x89, 0x89, 0x8A, 0x7C, 0x00}, // 9
{ 0x7E, 0x89, 0x91, 0xA1, 0x7E, 0x00}, // 0
{ 0x60, 0x80, 0x8D, 0x90, 0x60, 0x00}, // ?
{ 0x00, 0x00, 0xFD, 0x00, 0x00, 0x00}, // !
};

static uint8_t semcon_logo[900][3] = {{250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {244, 69, 59}, {229, 53, 54}, {234, 161, 156}, {236, 172, 168}, {229, 53, 54}, {246, 68, 56}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {247, 67, 58}, {252, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {254, 255, 252}, {247, 66, 64}, {250, 66, 59}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {229, 118, 123}, {253, 254, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {249, 255, 255}, {233, 153, 151}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {253, 252, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {252, 255, 255}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {254, 239, 235}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {247, 222, 214}, 
{252, 219, 216}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {253, 252, 255}, {251, 65, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {249, 55, 46}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {236, 172, 168}, {246, 68, 56}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {249, 67, 53}, {229, 118, 123}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {238, 54, 42}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {237, 119, 117}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {231, 111, 101}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {246, 68, 56}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 249}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {255, 255, 253}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {244, 69, 59}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {240, 133, 132}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {251, 65, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {247, 67, 61}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {229, 137, 133}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {249, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {252, 255, 255}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {252, 255, 255}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {252, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {252, 255, 255}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {252, 255, 255}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {252, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {252, 255, 255}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {255, 255, 253}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {252, 255, 255}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {252, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 253}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {255, 255, 253}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, 
{252, 255, 255}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {237, 119, 117}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {247, 66, 64}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {247, 66, 64}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {229, 118, 123}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {246, 68, 56}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 253}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {246, 68, 56}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {253, 252, 255}, {233, 51, 46}, {251, 65, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {251, 65, 58}, {233, 51, 46}, {253, 252, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {248, 53, 51}, {254, 254, 255}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {253, 252, 255}, {249, 55, 46}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {247, 67, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {251, 65, 58}, {243, 191, 182}, {253, 254, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {253, 254, 255}, {243, 191, 182}, {253, 63, 62}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {229, 118, 123}, {254, 254, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {252, 255, 255}, {228, 139, 140}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {247, 67, 58}, {252, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {255, 255, 255}, {254, 255, 252}, {247, 66, 64}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, 
{250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {240, 71, 60}, {229, 53, 54}, {234, 161, 156}, {236, 172, 168}, {229, 53, 54}, {246, 68, 56}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}, {250, 66, 58}};

static uint8_t saab_logo[900][3] = {{247, 247, 247}, {245, 245, 245}, {248, 248, 248}, {245, 245, 245}, {247, 247, 247}, {247, 247, 247}, {247, 247, 246}, {252, 251, 250}, {244, 246, 246}, {192, 200, 207}, {130, 144, 162}, {97, 114, 139}, {84, 103, 129}, {78, 97, 125}, {78, 96, 124}, {78, 96, 124}, {81, 100, 127}, {91, 108, 134}, {113, 129, 150}, {165, 175, 187}, {230, 233, 235}, {252, 252, 251}, {249, 248, 248}, {246, 246, 246}, {248, 248, 248}, {245, 245, 245}, {247, 247, 247}, {247, 247, 247}, {246, 246, 246}, {248, 248, 248}, {247, 247, 247}, {243, 243, 243}, {250, 250, 250}, {243, 243, 243}, {248, 248, 248}, {249, 249, 248}, {244, 245, 244}, {192, 200, 208}, {93, 110, 135}, {69, 89, 118}, {74, 93, 122}, {57, 78, 109}, {33, 57, 95}, {22, 46, 87}, {23, 46, 84}, {22, 46, 85}, {26, 51, 91}, {48, 69, 103}, {70, 89, 118}, {73, 92, 121}, {73, 92, 121}, {150, 163, 178}, {235, 238, 238}, {247, 247, 246}, {251, 250, 250}, {243, 243, 243}, {249, 249, 249}, {247, 247, 247}, {244, 244, 244}, {251, 251, 251}, {245, 245, 245}, {252, 252, 252}, {240, 240, 240}, {252, 252, 252}, {247, 247, 246}, {230, 233, 234}, {119, 134, 155}, {39, 61, 96}, {73, 92, 121}, {43, 66, 104}, {7, 33, 78}, {5, 30, 74}, {49, 60, 72}, {52, 63, 73}, {7, 33, 77}, {29, 47, 75}, {64, 70, 71}, {16, 38, 73}, {5, 31, 75}, {24, 49, 91}, {71, 90, 121}, {51, 71, 104}, {69, 89, 118}, {199, 207, 213}, {244, 244, 243}, {253, 253, 253}, {243, 243, 243}, {247, 247, 247}, {250, 250, 250}, {239, 239, 239}, {248, 248, 248}, {241, 241, 241}, {253, 253, 253}, {246, 245, 244}, {218, 223, 226}, {74, 93, 122}, {31, 54, 90}, {77, 96, 125}, {22, 45, 84}, {70, 74, 68}, {127, 113, 67}, {77, 80, 72}, {188, 154, 62}, {184, 151, 63}, {21, 42, 76}, {125, 112, 67}, {208, 167, 61}, {98, 94, 70}, {76, 79, 72}, {99, 93, 68}, {24, 44, 74}, {55, 77, 112}, {61, 81, 112}, {30, 53, 89}, {172, 182, 193}, {243, 244, 243}, {251, 251, 251}, {247, 247, 247}, {243, 243, 243}, {254, 254, 254}, {246, 246, 246}, {250, 250, 250}, {246, 245, 245}, {220, 225, 228}, {64, 84, 114}, {23, 47, 85}, {79, 98, 126}, {16, 39, 78}, {136, 119, 65}, {116, 106, 68}, {94, 91, 70}, {125, 112, 68}, {161, 136, 64}, {166, 139, 64}, {142, 123, 66}, {188, 154, 62}, {129, 115, 67}, {162, 136, 64}, {140, 121, 66}, {174, 144, 63}, {138, 120, 66}, {58, 65, 69}, {51, 73, 108}, {59, 79, 111}, {18, 41, 80}, {170, 180, 191}, {246, 247, 246}, {247, 247, 247}, {249, 249, 249}, {241, 241, 241}, {247, 247, 247}, {248, 247, 247}, {235, 238, 238}, {85, 103, 130}, {6, 31, 72}, {83, 101, 128}, {18, 43, 82}, {20, 41, 75}, {142, 123, 66}, {116, 106, 68}, {194, 158, 62}, {213, 170, 60}, {126, 112, 66}, {98, 93, 67}, {187, 152, 59}, {135, 117, 64}, {92, 89, 68}, {185, 151, 62}, {197, 160, 61}, {156, 132, 65}, {169, 141, 64}, {118, 107, 68}, {0, 27, 74}, {69, 88, 118}, {38, 60, 95}, {26, 50, 87}, {194, 202, 208}, {250, 249, 249}, {246, 246, 246}, {248, 248, 248}, {248, 248, 248}, {246, 247, 245}, {139, 152, 169}, {1, 26, 68}, {60, 80, 111}, {46, 67, 101}, {6, 31, 74}, {32, 50, 75}, {121, 109, 68}, {116, 105, 67}, {131, 115, 64}, {80, 83, 74}, {30, 52, 89}, {34, 58, 98}, {53, 72, 100}, {43, 64, 99}, {25, 50, 93}, {58, 69, 79}, {117, 106, 66}, {142, 122, 64}, {152, 129, 65}, {130, 115, 67}, {6, 32, 77}, {17, 40, 80}, {81, 99, 126}, {7, 31, 73}, {65, 84, 115}, {229, 233, 234}, {247, 247, 247}, {250, 250, 250}, {249, 248, 248}, {212, 218, 223}, {31, 53, 90}, {15, 38, 78}, {78, 97, 125}, {12, 36, 76}, {9, 34, 77}, {47, 60, 74}, {126, 112, 64}, {81, 86, 84}, {60, 81, 114}, {63, 85, 121}, {56, 78, 112}, {49, 70, 103}, {39, 62, 100}, {43, 65, 101}, {53, 74, 107}, {58, 80, 117}, {58, 80, 117}, {50, 68, 96}, {101, 95, 68}, {106, 99, 67}, {10, 35, 77}, {8, 32, 74}, {54, 74, 107}, {48, 69, 103}, {1, 26, 69}, {141, 154, 170}, {252, 252, 251}, {241, 241, 241}, {252, 253, 252}, {117, 132, 153}, {0, 25, 68}, {46, 67, 101}, {54, 75, 107}, {9, 33, 74}, {11, 35, 75}, {13, 37, 79}, {56, 78, 115}, {65, 86, 119}, {27, 51, 91}, {74, 77, 71}, 
{56, 65, 70}, {5, 31, 75}, {124, 110, 65}, {45, 57, 71}, {14, 36, 74}, {99, 94, 67}, {25, 47, 83}, {53, 74, 108}, {63, 85, 119}, {21, 46, 87}, {9, 34, 74}, {12, 36, 76}, {22, 45, 83}, {74, 93, 121}, {5, 30, 71}, {44, 65, 99}, {224, 229, 231}, {254, 254, 254}, {217, 222, 225}, {42, 64, 99}, {5, 29, 71}, {66, 86, 116}, {30, 53, 89}, {9, 33, 74}, {22, 46, 84}, {79, 98, 125}, {42, 63, 98}, {9, 33, 74}, {7, 32, 75}, {43, 57, 74}, {162, 137, 64}, {93, 90, 70}, {213, 170, 60}, {134, 118, 67}, {131, 116, 67}, {105, 98, 69}, {5, 32, 77}, {8, 33, 74}, {24, 47, 85}, {72, 91, 120}, {39, 60, 96}, {9, 33, 74}, {10, 35, 75}, {73, 92, 121}, {19, 43, 82}, {6, 31, 72}, {157, 169, 182}, {246, 246, 245}, {161, 172, 185}, {12, 36, 76}, {11, 35, 75}, {73, 92, 121}, {16, 40, 79}, {20, 43, 82}, {82, 100, 127}, {28, 50, 88}, {9, 33, 74}, {13, 37, 77}, {13, 37, 77}, {6, 32, 77}, {114, 104, 65}, {127, 116, 65}, {195, 161, 60}, {143, 126, 64}, {138, 120, 61}, {25, 44, 71}, {10, 35, 77}, {13, 37, 77}, {11, 35, 76}, {13, 37, 77}, {69, 88, 118}, {37, 59, 95}, {5, 30, 71}, {63, 83, 114}, {32, 54, 91}, {3, 28, 70}, {89, 107, 132}, {245, 247, 246}, {105, 122, 144}, {7, 32, 73}, {14, 37, 77}, {74, 93, 121}, {12, 36, 76}, {77, 96, 124}, {33, 55, 91}, {9, 33, 74}, {13, 37, 77}, {13, 37, 77}, {9, 35, 75}, {7, 41, 82}, {76, 89, 110}, {190, 145, 127}, {178, 136, 124}, {184, 144, 127}, {157, 149, 144}, {122, 132, 153}, {30, 53, 90}, {11, 35, 75}, {13, 37, 77}, {12, 36, 76}, {14, 38, 78}, {72, 91, 120}, {19, 43, 82}, {55, 75, 107}, {39, 61, 96}, {6, 31, 72}, {45, 66, 100}, {224, 229, 231}, {66, 85, 115}, {8, 33, 74}, {14, 38, 78}, {70, 89, 118}, {51, 72, 105}, {58, 78, 110}, {7, 32, 73}, {13, 37, 77}, {13, 37, 77}, {7, 34, 74}, {80, 86, 115}, {186, 108, 124}, {172, 146, 161}, {209, 99, 116}, {223, 32, 54}, {221, 61, 81}, {226, 139, 150}, {187, 171, 181}, {17, 45, 83}, {12, 36, 76}, {13, 37, 77}, {13, 37, 77}, {11, 35, 75}, {27, 50, 87}, {64, 83, 114}, {52, 73, 105}, {40, 61, 96}, {8, 33, 74}, {23, 47, 85}, {194, 202, 208}, {44, 65, 99}, {10, 34, 75}, {14, 38, 78}, {75, 94, 122}, {80, 98, 126}, {15, 39, 79}, {13, 37, 77}, {13, 37, 77}, {13, 37, 77}, {4, 32, 73}, {128, 126, 146}, {200, 113, 127}, {201, 95, 110}, {197, 90, 106}, {221, 32, 51}, {219, 23, 44}, {218, 121, 132}, {220, 107, 120}, {74, 87, 117}, {7, 32, 73}, {13, 37, 77}, {13, 37, 77}, {13, 37, 77}, {8, 33, 74}, {55, 75, 107}, {75, 94, 122}, {37, 59, 95}, {9, 34, 74}, {15, 39, 78}, {174, 184, 195}, {36, 58, 94}, {11, 35, 75}, {11, 35, 75}, {106, 122, 145}, {68, 87, 117}, {7, 32, 73}, {13, 37, 77}, {13, 37, 77}, {12, 36, 76}, {51, 72, 105}, {96, 114, 139}, {83, 110, 136}, {112, 118, 140}, {215, 109, 121}, {219, 44, 63}, {218, 91, 105}, {219, 117, 129}, {217, 129, 140}, {101, 108, 133}, {5, 31, 73}, {13, 37, 77}, {13, 37, 77}, {13, 37, 77}, {11, 35, 76}, {24, 47, 85}, {114, 129, 150}, {35, 58, 93}, {10, 34, 74}, {13, 37, 77}, {164, 175, 187}, {39, 61, 96}, {10, 35, 75}, {9, 33, 74}, {128, 142, 161}, {95, 112, 137}, {7, 32, 73}, {13, 37, 77}, {13, 37, 77}, {12, 36, 76}, {28, 51, 88}, {49, 71, 104}, {124, 134, 154}, {171, 129, 144}, {220, 63, 79}, {218, 118, 130}, {217, 182, 188}, {220, 134, 144}, {203, 96, 112}, {47, 75, 108}, {9, 33, 74}, {13, 37, 77}, {13, 37, 77}, {13, 37, 77}, {9, 33, 74}, {40, 61, 96}, {147, 160, 175}, {39, 60, 96}, {9, 34, 74}, {14, 38, 77}, {169, 179, 191}, {55, 76, 108}, {9, 33, 74}, {13, 37, 77}, {91, 108, 134}, {76, 95, 123}, {39, 61, 96}, {9, 34, 74}, {13, 37, 77}, {13, 37, 77}, {11, 35, 76}, {6, 31, 72}, {70, 89, 119}, {206, 154, 164}, {221, 91, 105}, {217, 175, 181}, {218, 132, 142}, {218, 84, 99}, {220, 115, 127}, {58, 76, 108}, {7, 33, 74}, {13, 37, 77}, {13, 37, 77}, {13, 37, 77}, {13, 37, 77}, {69, 89, 118}, {85, 103, 130}, {43, 64, 99}, {8, 33, 74}, {19, 43, 82}, {186, 194, 203}, {88, 106, 132}, {7, 32, 73}, {14, 38, 78}, {75, 93, 122}, {22, 45, 84}, {86, 104, 130}, {15, 39, 78}, {12, 36, 76}, {13, 37, 77}, 
{13, 37, 77}, {12, 36, 76}, {12, 39, 79}, {165, 153, 166}, {222, 63, 80}, {219, 52, 70}, {219, 44, 63}, {220, 51, 69}, {169, 170, 182}, {42, 65, 99}, {9, 34, 74}, {13, 37, 77}, {13, 37, 77}, {8, 32, 73}, {58, 79, 110}, {43, 65, 99}, {54, 74, 107}, {40, 61, 96}, {7, 31, 73}, {35, 57, 93}, {211, 217, 221}, {138, 152, 169}, {8, 33, 74}, {12, 36, 76}, {74, 93, 121}, {11, 36, 76}, {43, 64, 99}, {79, 97, 125}, {10, 35, 75}, {12, 36, 76}, {13, 37, 77}, {13, 37, 77}, {6, 34, 75}, {121, 106, 129}, {226, 105, 117}, {218, 63, 80}, {214, 115, 127}, {227, 93, 106}, {108, 100, 124}, {8, 35, 76}, {13, 37, 77}, {13, 37, 77}, {8, 32, 73}, {44, 66, 100}, {68, 87, 117}, {5, 30, 71}, {60, 80, 111}, {35, 57, 93}, {4, 29, 70}, {69, 88, 118}, {241, 244, 244}, {196, 204, 210}, {26, 49, 87}, {7, 32, 73}, {70, 89, 119}, {24, 47, 85}, {7, 32, 73}, {50, 71, 104}, {77, 96, 124}, {17, 40, 80}, {9, 33, 74}, {13, 37, 77}, {6, 33, 74}, {84, 85, 113}, {188, 162, 172}, {199, 94, 110}, {197, 100, 116}, {151, 153, 168}, {43, 61, 96}, {9, 34, 74}, {11, 36, 76}, {8, 33, 74}, {49, 70, 103}, {71, 90, 119}, {13, 37, 77}, {8, 33, 74}, {70, 89, 119}, {24, 47, 85}, {3, 28, 70}, {129, 143, 161}, {245, 245, 244}, {244, 246, 245}, {83, 101, 128}, {1, 26, 68}, {55, 76, 108}, {43, 65, 99}, {7, 32, 73}, {64, 84, 114}, {58, 79, 110}, {81, 99, 127}, {43, 65, 99}, {11, 35, 76}, {8, 32, 73}, {12, 37, 78}, {70, 97, 126}, {183, 134, 147}, {132, 104, 126}, {14, 44, 83}, {7, 32, 73}, {9, 33, 74}, {25, 48, 86}, {69, 88, 118}, {62, 82, 113}, {53, 73, 106}, {19, 42, 81}, {15, 39, 78}, {77, 95, 123}, {10, 35, 75}, {23, 46, 84}, {202, 209, 215}, {253, 253, 252}, {252, 252, 251}, {178, 187, 197}, {11, 35, 75}, {27, 50, 87}, {71, 90, 119}, {3, 28, 70}, {69, 88, 118}, {102, 119, 142}, {49, 70, 103}, {67, 86, 116}, {77, 96, 124}, {55, 76, 108}, {31, 54, 90}, {19, 43, 82}, {65, 87, 117}, {21, 48, 86}, {24, 47, 85}, {44, 65, 99}, {69, 88, 118}, {70, 89, 119}, {44, 66, 100}, {77, 95, 124}, {92, 109, 134}, {11, 35, 76}, {40, 61, 96}, {62, 82, 113}, {0, 24, 67}, {98, 115, 139}, {246, 248, 247}, {247, 246, 247}, {247, 247, 247}, {243, 245, 244}, {90, 107, 133}, {0, 25, 68}, 
{74, 93, 122}, {23, 47, 85}, {56, 76, 108}, {98, 115, 139}, {87, 104, 131}, {78, 96, 124}, {42, 64, 98}, {50, 71, 104}, {63, 83, 114}, {70, 89, 119}, {65, 85, 115}, {70, 89, 118}, {68, 87, 117}, {62, 82, 113}, {36, 58, 94}, {71, 90, 119}, {87, 105, 131}, {99, 116, 139}, {79, 97, 125}, {34, 57, 93}, {74, 93, 122}, {22, 45, 83}, {28, 51, 88}, {203, 210, 216}, {251, 251, 250}, {243, 243, 243}, {248, 248, 248}, {245, 244, 244}, {210, 217, 221}, {37, 59, 95}, {25, 47, 85}, {73, 92, 121}, {46, 67, 101}, {92, 109, 135}, {97, 114, 138}, {52, 73, 106}, {101, 118, 141}, {89, 107, 133}, {70, 89, 118}, {56, 76, 108}, {76, 95, 123}, {46, 68, 101}, {40, 62, 97}, {109, 125, 147}, {85, 103, 129}, {56, 77, 109}, {89, 106, 132}, {95, 112, 137}, {65, 84, 115}, {61, 81, 112}, {62, 82, 112}, {3, 28, 70}, {147, 159, 175}, {247, 248, 247}, {244, 244, 244}, {253, 253, 253}, {245, 245, 245}, {252, 252, 252}, {244, 244, 243}, {178, 188, 197}, {19, 42, 81}, {53, 74, 106}, {57, 77, 109}, {54, 75, 107}, {104, 121, 144}, {61, 81, 112}, {133, 147, 164}, {115, 131, 152}, {142, 155, 171}, {98, 115, 139}, {88, 106, 132}, {97, 114, 138}, {67, 86, 116}, {69, 88, 118}, {117, 132, 152}, {98, 115, 139}, {107, 123, 145}, {92, 109, 135}, {40, 62, 97}, {80, 98, 126}, {6, 31, 72}, {109, 126, 148}, {237, 239, 238}, {248, 248, 248}, {251, 251, 251}, {239, 239, 239}, {247, 247, 247}, {242, 242, 242}, {252, 252, 252}, {245, 245, 244}, {168, 178, 190}, {23, 47, 85}, {62, 82, 113}, {55, 76, 108}, {28, 51, 88}, {88, 105, 131}, {90, 108, 133}, {101, 117, 141}, {143, 156, 172}, {101, 117, 141}, {75, 94, 122}, {101, 117, 141}, {62, 82, 113}, {101, 117, 141}, {87, 105, 131}, {99, 115, 139}, {34, 57, 93}, {26, 49, 87}, {80, 99, 126}, {17, 41, 80}, {104, 120, 143}, {231, 234, 234}, {251, 251, 251}, {247, 247, 247}, {244, 244, 244}, {252, 252, 252}, {246, 246, 246}, {248, 248, 248}, {245, 245, 245}, {249, 249, 249}, {248, 248, 247}, {186, 194, 202}, {51, 72, 105}, {54, 75, 107}, {68, 87, 117}, {18, 41, 80}, {17, 41, 80}, {43, 64, 99}, {60, 80, 112}, {77, 95, 123}, {98, 115, 139}, {88, 105, 131}, {77, 96, 124}, {70, 89, 118}, {14, 38, 78}, {11, 35, 76}, {47, 68, 102}, {74, 93, 121}, {31, 54, 90}, {131, 145, 163}, {236, 238, 238}, {250, 250, 250}, {246, 246, 246}, {247, 247, 247}, {247, 247, 247}, {245, 245, 245}, {246, 246, 246}, {249, 249, 249}, {244, 244, 244}, {249, 249, 249}, {246, 246, 246}, {249, 249, 248}, {222, 226, 229}, {115, 131, 151}, {55, 76, 108}, {73, 92, 121}, {56, 76, 108}, {25, 48, 85}, {10, 34, 75}, {8, 33, 74}, {11, 35, 75}, {8, 32, 73}, {10, 35, 75}, {15, 38, 78}, {44, 65, 99}, {72, 91, 120}, {61, 81, 112}, {77, 96, 124}, {187, 195, 203}, {247, 248, 247}, {246, 246, 246}, {249, 249, 249}, {245, 245, 245}, {247, 247, 247}, {248, 248, 248}, {244, 244, 244}, {248, 248, 248}, {242, 242, 242}, {252, 252, 252}, {242, 242, 242}, {249, 249, 249}, {247, 247, 247}, {246, 246, 245}, {251, 252, 251}, {205, 211, 216}, {129, 143, 162}, {91, 108, 133}, {83, 101, 128}, {77, 96, 124}, {69, 89, 118}, {65, 85, 115}, {67, 86, 116}, {74, 93, 121}, {81, 100, 127}, {86, 104, 130}, {108, 124, 146}, {175, 184, 195}, {240, 242, 242}, {251, 251, 250}, {243, 243, 243}, {252, 252, 252}, {242, 242, 242}, {250, 250, 250}, {247, 247, 247}, {243, 243, 243}, {253, 253, 253}, {245, 245, 245}, {253, 253, 253}, {239, 239, 239}, {253, 253, 253}, {243, 243, 243}, {246, 246, 246}, {251, 251, 251}, {240, 240, 240}, {255, 255, 255}, {246, 247, 246}, {230, 233, 234}, {196, 204, 211}, {162, 174, 186}, {146, 159, 174}, {139, 153, 169}, {142, 155, 171}, {154, 166, 180}, {180, 190, 199}, {219, 224, 228}, {240, 241, 240}, {255, 255, 255}, {247, 247, 246}, {244, 244, 244}, {252, 252, 252}, {239, 239, 239}, {253, 253, 253}, {242, 242, 242}, {247, 247, 247}, {251, 251, 251}, {239, 239, 239}};

const char letterPositions[] = " ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890?!";

size_t selected_color = 1;
size_t selected_repetitions = 1;


uint8_t get_letter_pos( char letter ) {
    for (uint8_t i = 0; i < sizeof(letterPositions); i++ )
    {
        if ( letter == letterPositions[i] ) {
            return i;
        }
    }
    return 0;
}

void set_pixel( uint16_t row, uint16_t column, size_t color )  {
    uint16_t led_no = row*COLUMNS;

    if(row %2) {
        led_no += (COLUMNS - 1) - column;
    }
        else {
  	    led_no += column;
    }

    memcpy(&pixels[led_no], &colors[color], sizeof(struct led_rgb));
}

void write_char( const uint8_t* c, int x_offset) {
	int x_pos = 0;
  	for( uint8_t x=0; x<6; x++ ) {
  		x_pos = x + x_offset;
    	if( x_pos >=0 && x_pos < COLUMNS ) {
    		for( uint8_t y=0; y<8; y++ ) {
   	  			if(( 0x80 >> y ) & c[x] ) {
	  				set_pixel( y+1, x_pos, selected_color );
      			}
  			}
    	}
  	}
}

static void update_led_strip( void ) {
    int rc;

    rc = led_strip_update_rgb(strip, pixels, STRIP_NUM_PIXELS);
    if (rc) {
        LOG_ERR("couldn't update strip: %d", rc);
    }
}

static void clear_pixel_memory( void ) {
    /* Clear pixel memory */
    memset(&pixels, 0x00, sizeof(pixels));
}

void neopixel_set_color( size_t color ) {
    selected_color = color;
}

void neopixel_set_repetitions( size_t repetitions ) {
    selected_repetitions = repetitions;
}

void neopixel_display_write_string( char* text, size_t length ) {
    uint8_t chPos = 0;
  	int startPos = COLUMNS - 1;
  	int numPixels = 6 * length;
    int j = 0;

    while (j < selected_repetitions ) {
        startPos = COLUMNS - 1;
        while ((startPos + numPixels) >= 0) {
            clear_pixel_memory();
            for (int j=0; j<length; j++) {
                chPos = get_letter_pos( text[j] );

                write_char((const uint8_t*)letters[chPos],startPos + j*6);
            }
            startPos -= 1;
            update_led_strip();                          //  Update strip to match
            k_sleep(DELAY_TIME);
        }
        j++;
    }
}


void neopixel_write_semcon_logo( void ) {

    struct led_rgb color;
    int x, y, led_no, table_idx;
    
    int row_start = 0;
    int j = 0;

    while (j < selected_repetitions ) {
        for (row_start = 0; row_start < 20; row_start++ )
        {
            clear_pixel_memory();   
            for(y = 0; y < ROWS; y++ ) {
                for(x = 0; x < COLUMNS; x++ ) {
                    led_no = y*COLUMNS;
                    if(y%2) {
                        led_no += (COLUMNS - 1) - x;
                    }
                    else {
                        led_no += x;
                    }
                    table_idx = (row_start + y)*COLUMNS + x;
                    color.r = semcon_logo[table_idx][0]/8;
                    color.g = semcon_logo[table_idx][1]/8;
                    color.b = semcon_logo[table_idx][2]/8;

                    //color = RGB(test_logo[y*COLUMNS + x][0], test_logo[y*COLUMNS + x][1],test_logo[y*COLUMNS + x][2]);
                    memcpy(&pixels[led_no], &color, sizeof(struct led_rgb));
                }
            }
            update_led_strip();
            k_sleep(DELAY_TIME_LOGO);
        }
        for (row_start = 19; row_start >= 0; row_start-= 1 )
        {
            clear_pixel_memory();   
            for(y = 0; y < ROWS; y++ ) {
                for(x = 0; x < COLUMNS; x++ ) {
                    led_no = y*COLUMNS;
                    if(y%2) {
                        led_no += (COLUMNS - 1) - x;
                    }
                    else {
                        led_no += x;
                    }
                    table_idx = (row_start + y)*COLUMNS + x;
                    color.r = semcon_logo[table_idx][0]/8;
                    color.g = semcon_logo[table_idx][1]/8;
                    color.b = semcon_logo[table_idx][2]/8;

                    memcpy(&pixels[led_no], &color, sizeof(struct led_rgb));
                }
            }
            update_led_strip();
            k_sleep(DELAY_TIME_LOGO);
        }
        j++;
    }
    clear_pixel_memory();   
    update_led_strip();
}

